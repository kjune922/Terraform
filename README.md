# βοΈ Cloud AI Infrastructure Portfolio (IaC)

2026λ…„ μ΅Έμ—… μμ •μΈ μλΉ„ ν΄λΌμ°λ“ μ—”μ§€λ‹μ–΄λ΅μ„, ν¨μ¨μ μ΄κ³  μ•μ „ν• μΈν”„λΌλ¥Ό κµ¬μ¶•ν•λ” κ³Όμ •μ„ κΈ°λ΅ν• μ €μ¥μ†μ…λ‹λ‹¤.

## π€ Project Overview
μ‹¤μ  AWS λΉ„μ© λ°μƒμ„ λ°©μ§€ν•κΈ° μ„ν•΄ **LocalStack** ν™κ²½μ—μ„ μΈν”„λΌλ¥Ό κµ¬μ¶•ν•λ©°, λ¨λ“  λ¦¬μ†μ¤λ” **Terraform**μ„ ν†µν•΄ μ½”λ“λ΅ κ΄€λ¦¬(IaC)ν•©λ‹λ‹¤.

## π›  Tech Stack
- **Infrastructure:** Terraform, AWS (VPC, Subnet, IGW, SG, EC2)
- **Environment:** WSL2 (Ubuntu), Docker, LocalStack
- **Tools:** AWS CLI v2, Git, Python

## π— Key Implementation
### 1. Networking Foundation
- VPC(10.0.0.0/16) λ° Public Subnet μ„¤κ³„
- Internet Gatewayμ™€ Route Tableμ„ ν†µν• μ™Έλ¶€ ν†µμ‹  κ²½λ΅ ν™•λ³΄
- Security Groupμ„ ν™μ©ν• μΈλ°”μ΄λ“ νΈλν”½(HTTP:80, SSH:22) μ μ–΄

### 2. EC2 Automation
- **User Data:** μΈμ¤ν„΄μ¤ λ¶€ν… μ‹ Python μ›Ή μ„λ²„κ°€ μλ™μΌλ΅ κµ¬λ™λλ„λ΅ μ…Έ μ¤ν¬λ¦½νΈ μλ™ν™” μ£Όμ…
- **Metadata Verification:** AWS CLIλ¥Ό ν†µν•΄ Base64λ΅ μΈμ½”λ”©λ User Dataκ°€ μ •μƒ μ£Όμ…λμ—λ”μ§€ κ²€μ¦ μ™„λ£

## π›  Troubleshooting (κ°€μ¥ μ¤‘μ”ν• λ¶€λ¶„)
- **κ°λ° ν™κ²½ μµμ ν™”:** κ°€μƒ λ¨Έμ‹ μ λ””μ¤ν¬ μ©λ‰ ν•κ³„λ¥Ό κ·Ήλ³µν•κΈ° μ„ν•΄ WSL2 κΈ°λ° κ°λ° ν™κ²½μΌλ΅ μ™„μ „ μ΄κ·Έλ μ΄μ… μν–‰
- **Immutable Infrastructure μ‹¤μ²:** μ‹¤ν–‰ μ¤‘μΈ μΈμ¤ν„΄μ¤μ User Data μμ • μ‹ λ°μƒν•λ” `InvalidUserData.Malformed` μ—λ¬λ¥Ό λ¶„μ„ν•μ—¬ `user_data_replace_on_change` μµμ…μ„ μ μ©, μΈν”„λΌμ λ¶λ³€μ„±(Immutability)μ„ λ³΄μ¥ν•λ” κµ¬μ΅°λ΅ κ°μ„ 
- **CLI μ—°λ™:** LocalStack ν™κ²½μ—μ„ AWS CLI v2λ¥Ό μλ™ μ„¤μΉν•κ³  `alias` μ„¤μ •μ„ ν†µν•΄ κ°λ° ν¨μ¨μ„± μ¦λ€

## π§  Algorithm Study
- **Greedy & Heap:** κ·Έλ¦¬λ”” μ•κ³ λ¦¬μ¦μ μµμ  λ¶€λ¶„ κµ¬μ΅°λ¥Ό μ΄ν•΄ν•κ³ , `heapq`λ¥Ό ν™μ©ν•μ—¬ 'μΉ΄λ“ μ •λ ¬ν•κΈ°' λ“± λ³µμ΅λ„κ°€ 
λ†’μ€ λ¬Έμ λ“¤μ„ ν¨μ¨μ μΌλ΅ ν•΄κ²° ($O(N \log N)$)

## π€ Update (2026-01-21 ~ 01-22)

### 1. Infrastructure Automation (IaC)
λ‹¨μ μΈν”„λΌ μƒμ„±μ„ λ„μ–΄, μ„λ²„ λ¶€ν…κ³Ό λ™μ‹μ— μ• ν”λ¦¬μΌ€μ΄μ… ν™κ²½μ΄ μ™„μ„±λλ” **Bootstrap μλ™ν™”**λ¥Ό κµ¬ν„ν–μµλ‹λ‹¤.
- **Docker & Docker-Compose μλ™ μ„¤μΉ:** `user_data` μ¤ν¬λ¦½νΈλ¥Ό ν†µν•΄ μΈμ¤ν„΄μ¤ μƒμ„± μ‹ μµμ‹  Docker μ—”μ§„κ³Ό Compose λΌμ΄λΈλ¬λ¦¬λ¥Ό μλ™ λ°°ν¬.
- **Web Service λ°°ν¬ μλ™ν™”:** Nginx μ»¨ν…μ΄λ„λ¥Ό λ¶€ν… μ§ν›„ μλ™ μ‹¤ν–‰ν•μ—¬ μΈν”„λΌμ™€ μ„λΉ„μ¤μ κ²°ν•©λ„ μµμ ν™”.



### 2. Verification & Troubleshooting (Engineering Excellence)
LocalStack(Simulator) ν™κ²½μ ν•κ³„λ¥Ό κ·Ήλ³µν•κΈ° μ„ν•΄ λ‹¤μκ³Ό κ°™μ€ **Metadata κ²€μ¦ μ „λµ**μ„ μ‚¬μ©ν–μµλ‹λ‹¤.
- **λ¬Έμ  μƒν™©:** LocalStack λ¬΄λ£ λ²„μ „ νΉμ„±μƒ μ‹¤μ  μ»¨ν…μ΄λ„ λ‚΄λ¶€ μ¤ν¬λ¦½νΈ μ‹¤ν–‰(Docker-in-Docker)μ€ μ ν•λ¨.
- **ν•΄κ²° λ°©μ•:** AWS CLI(`awslocal`)λ¥Ό μ‚¬μ©ν•μ—¬ EC2 μΈμ¤ν„΄μ¤μ `userData` μ†μ„±μ„ μ¶”μ¶ν•κ³ , μ΄λ¥Ό **Base64 λ””μ½”λ”©**ν•μ—¬ μ„¤κ³„λ„(Terraform)μ™€ μ‹¤μ  μ£Όμ…λ μ‹¤ν–‰ μ§€μΉ¨μ„κ°€ μΌμΉν•λ”μ§€ λ°μ΄ν„° λ¬΄κ²°μ„± κ²€μ¦ μ™„λ£.
- **μ£Όμ” λ…λ Ήμ–΄:**
  ```bash
  awslocal ec2 describe-instance-attribute --instance-id [ID] --attribute userData




π€ 2026-01-23: Algorithm & Cloud Infrastructure Milestone

π§  1. Algorithm: Dijkstra (μµλ‹¨ κ²½λ΅)
κ°€μ¤‘μΉκ°€ μλ” κ·Έλν”„μ—μ„ μ‹μ‘μ μΌλ΅λ¶€ν„° λ¨λ“  λ…Έλ“κΉμ§€μ μµλ‹¨ κ±°λ¦¬λ¥Ό κµ¬ν•λ” μ•κ³ λ¦¬μ¦μ„ κµ¬ν„ν–μµλ‹λ‹¤.

ν•µμ‹¬ μ„¤κ³„ λ…Όλ¦¬
μ°μ„ μμ„ ν(Priority Queue): νμ΄μ¬μ heapqλ¥Ό μ‚¬μ©ν•μ—¬ κ±°λ¦¬κ°€ κ°€μ¥ μ§§μ€ λ…Έλ“λ¥Ό $O(\log V)$μ μ‹κ°„ λ³µμ΅λ„λ΅ μ¶”μ¶ν•©λ‹λ‹¤.

κ°€μ§€μΉκΈ°(Pruning): νμ—μ„ κΊΌλ‚Έ κ±°λ¦¬ κ°’μ΄ μ΄λ―Έ κΈ°λ΅λ μµλ‹¨ κ±°λ¦¬(distance[now])λ³΄λ‹¤ ν΄ κ²½μ° λ¬΄μ‹ν•μ—¬ μ¤‘λ³µ μ—°μ‚°μ„ νκΈ°μ μΌλ΅ μ¤„μ€μµλ‹λ‹¤.

μ‹κ°„ λ³µμ΅λ„: μ „μ²΄ μ•κ³ λ¦¬μ¦μ€ $O(E \log V)$μ ν¨μ¨μ„±μ„ κ°€μ§‘λ‹λ‹¤.

π—οΈ 2. Infrastructure as Code: Terraform & Docker
μλ™μΌλ΅ μ„λ²„λ¥Ό μ„¤μ •ν•λ λ°©μ‹μ„ λ²—μ–΄λ‚, **μ½”λ“μ— μν• μΈν”„λΌ κ΄€λ¦¬(IaC)**λ¥Ό κµ¬ν„ν–μµλ‹λ‹¤.

μ£Όμ” κµ¬ν„ λ‚΄μ©
Dockerizing: Python(Flask) μ• ν”λ¦¬μΌ€μ΄μ…μ„ κ°€λ²Όμ΄ python:3.9-slim λ² μ΄μ¤ μ΄λ―Έμ§€λ΅ μ»¨ν…μ΄λ„ν™”ν–μµλ‹λ‹¤.

Layer Optimization: requirements.txtλ¥Ό λ¨Όμ € λ³µμ‚¬ν•μ—¬ μΆ…μ†μ„± μ„¤μΉ λ‹¨κ³„λ¥Ό μΊμ‹±ν•¨μΌλ΅μ¨ λΉλ“ μ†λ„λ¥Ό μµμ ν™”ν–μµλ‹λ‹¤.

Bootstrap Automation: Terraformμ user_dataλ¥Ό ν™μ©ν•΄ EC2 μΈμ¤ν„΄μ¤ μƒμ„± μ‹ μ•„λ κ³Όμ •μ΄ μ™„μ „ μλ™ν™”λλ„λ΅ μ„¤κ³„ν–μµλ‹λ‹¤.

Docker & Docker Compose μ—”μ§„ μ„¤μΉ

Application Source Code μƒμ„± λ° ν™κ²½ κµ¬μ„±

Docker Image λΉλ“ λ° μ»¨ν…μ΄λ„ μ„λΉ„μ¤ λ°μΉ­ (Port 80)

Docker λ΅μ»¬μ¤ν… λ…λ Ήμ–΄
docker run --rm -it -p 4566:4566 -p 4510-4559:4510-4559 localstack/localstack


----------------------------------------------------------------
2026-01-29
----------------------------------------------------------------

π€ Terraform κΈ°λ° ν΄λΌμ°λ“ μΈν”„λΌ λ¨λ“ν™” ν”„λ΅μ νΈ
λ³Έ ν”„λ΅μ νΈλ” λ‹¨μΌ νμΌλ΅ κµ¬μ„±λ ν…λΌνΌ μ½”λ“λ¥Ό μ„λΉ„μ¤λ³„ λ¨λ“λ΅ λ¦¬ν©ν† λ§ν•μ—¬ μ¬μ‚¬μ©μ„±κ³Ό μ μ§€λ³΄μμ„±μ„ κ·Ήλ€ν™”ν• μΈν”„λΌ μλ™ν™”(IaC) μ‹¤μµμ…λ‹λ‹¤. μµμΆ…μ μΌλ΅λ” 3-Tier μ•„ν‚¤ν…μ² μ„¤κ³„λ¥Ό λ©ν‘λ΅ ν•©λ‹λ‹¤.

π—οΈ μ•„ν‚¤ν…μ² κµ¬μ΅° (Ground & Buildings)
λ³Έ ν”„λ΅μ νΈλ” μΈν”„λΌλ¥Ό 'λ•…(λ„¤νΈμ›ν¬)'κ³Ό 'κ±΄λ¬Ό(μ• ν”λ¦¬μΌ€μ΄μ…)'λ΅ λ¶„λ¦¬ν•μ—¬ μ„¤κ³„ν•μ€μµλ‹λ‹¤.

1. Network Layer (The Ground)
VPC & Subnets: λ¨λ“  μ„λΉ„μ¤μ κΈ°λ°μ΄ λλ” κ²©λ¦¬λ λ„¤νΈμ›ν¬ ν™κ²½μ„ κµ¬μ¶•ν•©λ‹λ‹¤.

Internet Gateway & Route Tables: μ™Έλ¶€ μΈν„°λ„·κ³Όμ ν†µμ‹  κ²½λ΅λ¥Ό μ •μν•©λ‹λ‹¤.

2. Application Layer (The Building)
Dockerized Server: userdata.shλ¥Ό ν†µν•΄ Docker λ° Docker-compose ν™κ²½μ„ μλ™ κµ¬μ¶•ν•©λ‹λ‹¤.

Security Group: μ„λΉ„μ¤λ³„(HTTP, SSH) λ§μ¶¤ν• λ°©ν™”λ²½ μ •μ±…μ„ μ μ©ν•©λ‹λ‹¤.

π“ ν”„λ΅μ νΈ κµ¬μ΅° (Directory Structure)
Plaintext

terraform-aws/
β”β”€β”€ modules/
β”‚   β”β”€β”€ vpc/           # λ„¤νΈμ›ν¬ μΈν”„λΌ (VPC, Subnet, IGW λ“±)
β”‚   β””β”€β”€ ec2/           # μ„λ²„ μΈν”„λΌ (EC2, Security Group, UserData)
β”β”€β”€ terraform.tfvars   # ν”„λ΅μ νΈ μ„¤μ •κ°’ (AMI, μΈμ¤ν„΄μ¤ νƒ€μ…, ν”„λ΅μ νΈλ… λ“±)
β”β”€β”€ variables.tf       # μ „μ—­ λ³€μ μ„ μ–Έ
β”β”€β”€ outputs.tf         # μµμΆ… μ¶λ ¥κ°’ μ •μ (Public IP λ“±)
β”β”€β”€ aws_main.tf        # λ©”μΈ μ§€νμ (λ¨λ“ μ΅°λ¦½ λ° ν”„λ΅λ°”μ΄λ” μ„¤μ •)
β””β”€β”€ userdata.sh        # μ„λ²„ μ΄κΈ°ν™” λ° μ•± λ°°ν¬ μ¤ν¬λ¦½νΈ
π› οΈ μ£Όμ” λ¦¬ν©ν† λ§ ν¬μΈνΈ
κ΄€μ‹¬μ‚¬μ λ¶„λ¦¬ (SoC): λ„¤νΈμ›ν¬ μΈν”„λΌμ™€ μ»΄ν“¨ν… μμ›μ„ λ…λ¦½λ λ¨λ“λ΅ λ¶„λ¦¬ν•μ—¬ λ…λ¦½μ μΈ μμ • λ° ν™•μ¥μ΄ κ°€λ¥ν•κ² μ„¤κ³„ν–μµλ‹λ‹¤.

λ³€μ κΈ°λ° μ μ–΄ (IaC Best Practice): ν•λ“μ½”λ”©μ„ μ κ±°ν•κ³  tfvars νμΌμ„ ν†µν•΄ λ¦¬μ „, μΈμ¤ν„΄μ¤ μ‚¬μ–‘, ν”„λ΅μ νΈ νƒκΉ…μ„ ν•κ³³μ—μ„ κ΄€λ¦¬ν•©λ‹λ‹¤.

λ¨λ“ κ°„ μμ΅΄μ„± κ΄€λ¦¬: VPC λ¨λ“μ output μ •λ³΄λ¥Ό λ£¨νΈ λ¨λ“μ„ κ±°μ³ EC2 λ¨λ“μ inputμΌλ΅ μ „λ‹¬ν•λ” λ°μ΄ν„° νμ΄ν”„λΌμΈμ„ κµ¬μ¶•ν–μµλ‹λ‹¤.

LocalStack μ‹λ®¬λ μ΄μ…: μ‹¤μ  AWS λΉ„μ© λ°μƒ μ—†μ΄ λ΅μ»¬ ν™κ²½μ—μ„ μΈν”„λΌ λ°°ν¬ λ° νΈλ¬λΈ”μν…μ„ μν–‰ν•  μ μλ„λ΅ μ—”λ“ν¬μΈνΈλ¥Ό κµ¬μ„±ν–μµλ‹λ‹¤.

π€ μ‹μ‘ν•κΈ°
ν™κ²½ μ¤€λΉ„
Terraform v1.0+

LocalStack (Docker κΈ°λ° AWS μ‹λ®¬λ μ΄ν„°)

μ‹¤ν–‰ μμ„
Bash

# 1. μ΄κΈ°ν™” λ° λ¨λ“ λ΅λ“
terraform init

# 2. μ‹¤ν–‰ κ³„ν ν™•μΈ (Lock μ΄μ λ°μƒ μ‹ -lock=false μ‚¬μ©)
terraform plan

# 3. μΈν”„λΌ λ°°ν¬
terraform apply
β οΈ νΈλ¬λΈ”μν… κΈ°λ΅
State Lock Issue: λΉ„μ •μƒ μΆ…λ£ μ‹ λ°μƒν•λ” .terraform.tfstate.lock.info κµμ°© μƒνƒλ¥Ό force-unlock λλ” λ¬Όλ¦¬μ  μ‚­μ λ΅ ν•΄κ²°.

Path Reference: λ¨λ“ λ‚΄λ¶€μ—μ„ λ£¨νΈ κ²½λ΅μ νμΌμ„ μ°Έμ΅°ν•κΈ° μ„ν•΄ ${path.root} λ³€μλ¥Ό ν™μ©.

Provider Endpoint: λ΅μ»¬ μ‹λ®¬λ μ΄ν„°λ¥Ό μ„ν•΄ STS λ° EC2 μ—”λ“ν¬μΈνΈλ¥Ό http://localhost:4566μΌλ΅ λ§¤ν•‘.

π’΅ Tech Stack
Infrastructure: Terraform (HCL)

Container: Docker, Docker-compose

Backend: Flask (Python)

Database: MySQL 8.0

Cloud Simulation: LocalStack


#
--------------------------------------------------
2026-01-30
--------------------------------------------------

π€ Terraform κΈ°λ° AWS 3-Tier μ•„ν‚¤ν…μ² μλ™ν™” ν”„λ΅μ νΈ
λ³Έ ν”„λ΅μ νΈλ” Terraformμ„ μ‚¬μ©ν•μ—¬ ν™•μ¥μ„± μκ³  λ³΄μ•μ΄ κ°•ν™”λ 3-Tier μ›Ή μ• ν”λ¦¬μΌ€μ΄μ… μΈν”„λΌλ¥Ό μ½”λ“λ΅ κµ¬μ¶•(IaC)ν• ν¬νΈν΄λ¦¬μ¤μ…λ‹λ‹¤. λ‹¨μ λ¦¬μ†μ¤ μƒμ„±μ„ λ„μ–΄, λ¨λ“ κ°„ λ°μ΄ν„° μ—°κ³„λ¥Ό ν†µν• μ™„μ „ μλ™ν™” ν”„λ΅λΉ„μ €λ‹μ„ κµ¬ν„ν•λ” λ° μ¤‘μ μ„ λ‘μ—μµλ‹λ‹¤.

π—οΈ 1. μ•„ν‚¤ν…μ² κ°μ”
λ³Έ μΈν”„λΌλ” μ™Έλ¶€ μΈν„°λ„·κ³Ό ν†µμ‹ ν•λ” **Public μμ—­(Web Tier)**κ³Ό λ°μ΄ν„° λ³΄νΈλ¥Ό μ„ν•΄ κ²©λ¦¬λ **Private μμ—­(Database Tier)**μΌλ΅ λ‚λ‰©λ‹λ‹¤.

VPC: μ „μ© κ°€μƒ λ„¤νΈμ›ν¬ κµ¬μ¶• λ° νΌλΈ”λ¦­/ν”„λΌμ΄λΉ— μ„λΈλ„· λ¶„λ¦¬.

Web Tier: Public Subnet λ‚΄ EC2 μΈμ¤ν„΄μ¤ (Docker κΈ°λ° Flask App).

DB Tier: Private Subnet λ‚΄ EC2 μΈμ¤ν„΄μ¤ (MySQL Server). μΈν„°λ„· κ²μ΄νΈμ›¨μ΄μ™€ μ—°κ²°λμ§€ μ•μ•„ μ™Έλ¶€ μ ‘κ·Όμ΄ μ›μ² μ°¨λ‹¨λ©λ‹λ‹¤.

π› οΈ 2. ν•µμ‹¬ κΈ°μ μ  μ„±μ·¨ (Technical Highlights)
π”— λ¨λ“ κ°„ λ°μ΄ν„° λ°”μΈλ”© (Output - Root - Variable νμ΄ν”„λΌμΈ)
ν…λΌνΌμ λ¨λ“ μΊ΅μν™”λ¥Ό μ μ§€ν•λ©΄μ„, λ¦¬μ†μ¤ κ°„ μμ΅΄μ„±μ„ ν•΄κ²°ν•κΈ° μ„ν•΄ λ°μ΄ν„° λΈλ΅μ»¤λ§(Brokering) κµ¬μ΅°λ¥Ό μ„¤κ³„ν–μµλ‹λ‹¤.

λ°°λ‹¬ A (Security): EC2 λ¨λ“μ—μ„ μƒμ„±λ Security Group IDλ¥Ό OutputμΌλ΅ μ¶”μ¶ν•μ—¬ DB λ¨λ“μ μΈλ°”μ΄λ“ κ·μΉ™(Variable)μΌλ΅ μ£Όμ…. (IPκ°€ μ•„λ‹ Identity κΈ°λ° λ³΄μ• κµ¬ν„)

λ°°λ‹¬ B (Connectivity): DB λ¨λ“ μƒμ„± μ‹ ν• λ‹Ήλλ” Private IPλ¥Ό OutputμΌλ΅ μ¶”μ¶ν•μ—¬ Web λ¨λ“μ userdataμ— λ™μ μΌλ΅ μ£Όμ….

β™οΈ templatefileμ„ ν†µν• μ™„μ „ μλ™ν™” ν”„λ΅λΉ„μ €λ‹
μΈν”„λΌ λ°°ν¬ μ‹μ μ— κ²°μ •λλ” DB μ„λ²„μ IP μ£Όμ†λ¥Ό Web μ„λ²„μ ν™κ²½ μ„¤μ •μ— μλ™μΌλ΅ λ°μν•κΈ° μ„ν•΄ ν…λΌνΌμ templatefile ν•¨μλ¥Ό μ‚¬μ©ν–μµλ‹λ‹¤.

userdata.sh λ‚΄ κ°€μƒ λ³€μ(${db_private_ip}) λ°°μΉ.

ν…λΌνΌ μ‹¤ν–‰ μ‹ DBμ μ‹¤μ  IPλ¥Ό ν•΄λ‹Ή μ„μΉμ— μΉν™ν•μ—¬ μ£Όμ….

κ²°κ³Ό: μΈν”„λΌ μƒμ„±κ³Ό λ™μ‹μ— μ• ν”λ¦¬μΌ€μ΄μ…μ΄ DB μ„λ²„λ¥Ό μ¦‰μ‹ μ°Ύμ•„ μ—°κ²°λλ” Zero-config λ°°ν¬ λ‹¬μ„±.

π›΅οΈ κ³„μΈµμ  λ³΄μ• μ„¤κ³„
Network Level: Private Subnet λ°°μΉλ¥Ό ν†µν•΄ DB μ„λ²„μ λ¬Όλ¦¬μ  λ…Έμ¶ μ°¨λ‹¨.

Application Level: DB λ³΄μ• κ·Έλ£Ή κ·μΉ™μ— μ¤μ§ **"Web λ³΄μ• κ·Έλ£Ή μ΄λ¦„ν‘(ID)"**λ¥Ό κ°€μ§„ νΈλν”½λ§ ν—μ©ν•λ„λ΅ μ„¤μ •ν•μ—¬ VPC λ‚΄λ¶€μ μΉ¨μ… μ‹λ„κΉμ§€ λ°©μ–΄.

π“‚ 3. ν”„λ΅μ νΈ κµ¬μ΅° (Directory Structure)
Plaintext

.
β”β”€β”€ aws_main.tf         # Root Configuration (λ¨λ“ μ΅°λ¦½ λ° λ°μ΄ν„° μ¤‘κ°)
β”β”€β”€ variables.tf        # μ „μ—­ λ³€μ μ„¤μ •
β”β”€β”€ userdata.sh         # Web μ„λ²„ ν”„λ΅λΉ„μ €λ‹ ν…ν”λ¦Ώ (Docker/App μ„¤μ •)
β”β”€β”€ db_setup.sh         # DB μ„λ²„ ν”„λ΅λΉ„μ €λ‹ μ¤ν¬λ¦½νΈ (MySQL μ„¤μ •)
β””β”€β”€ modules/
    β”β”€β”€ vpc/            # λ„¤νΈμ›ν¬ λ¦¬μ†μ¤ (VPC, Subnet, RouteTable)
    β”β”€β”€ ec2/            # Web μ„λ²„ λ¦¬μ†μ¤ (Security Group, Instance)
    β””β”€β”€ db/             # DB μ„λ²„ λ¦¬μ†μ¤ (Security Group, Instance)
π“ 4. μ£Όμ” ν•™μµ λ‚΄μ© λ° νκ³ 
μμ΅΄μ„± κ΄€λ¦¬: λ¦¬μ†μ¤ κ°„ λ°μ΄ν„°λ¥Ό μ£Όκ³ λ°›λ” κ²ƒλ§μΌλ΅ ν…λΌνΌμ΄ μƒμ„± μμ„λ¥Ό μ¤μ¤λ΅ νλ‹¨ν•λ” μ•”μ‹μ  μμ΅΄μ„±(Implicit Dependency) μ›λ¦¬λ¥Ό μ΄ν•΄ν•¨.

IaCμ κ°€μΉ: μλ™μΌλ΅ IPλ¥Ό ν™•μΈν•κ³  μ„¤μ • νμΌμ„ μμ •ν•λ” λ²κ±°λ΅μ›€ μ—†μ΄, μ½”λ“ ν• μ¤„λ΅ μ „μ²΄ μΈν”„λΌμ™€ μ•± μ„¤μ •μ΄ λ™κΈ°ν™”λλ” μλ™ν™”μ κ°•λ ¥ν•¨μ„ κ²½ν—ν•¨.

λ¬Έμ  ν•΄κ²° λ¥λ ¥: λ¨λ“ν™” κ³Όμ •μ—μ„ λ°μƒν•λ” Unsupported argument μ—λ¬ λ“±μ„ ν•΄κ²°ν•λ©° μ…λ ¥(Variable)κ³Ό μ¶λ ¥(Output) ν¬νΈ λ§¤μΉ­μ μ¤‘μ”μ„±μ„ μ²΄λ“ν•¨.

π€ μ‹¤ν–‰ λ°©λ²•
LocalStack λλ” AWS CLI ν™κ²½ μ¤€λΉ„.

terraform init : λ¨λ“ λ° ν”„λ΅λ°”μ΄λ” μ΄κΈ°ν™”.

terraform plan : μ‹¤ν–‰ κ³„ν ν™•μΈ λ° λ°μ΄ν„° μ£Όμ… κ²½λ΅ κ²€μ¦.

terraform apply : μΈν”„λΌ λ°°ν¬.

π›  μ¤λ μ§„ν–‰ν• κ³Όμ • (Workflow)
LocalStack νƒν”Ό λ° Real AWS ν™κ²½ μ „μ΄: λ΅μ»¬ λ¨μ ν™κ²½μ—μ„ μ‹¤μ  AWS μ„μΈ λ¦¬μ „(ap-northeast-2)μΌλ΅ ν”„λ΅λ°”μ΄λ” μ„¤μ •μ„ λ³€κ²½ν•κ³  μΈν”„λΌ κµ¬μ¶• μ‹μ‘.

μƒνƒ κ΄€λ¦¬(State Management) μ •ν™”: λ΅μ»¬μ¤νƒμ μ”μ¬κ°€ λ‚¨μ€ terraform.tfstateμ™€ μΆ€λΉ„ ν”„λ΅μ„Έμ¤λ¥Ό μ •λ¦¬ν•μ—¬ μ¤ν…μ΄νΈ λ½(State Lock) μ¶©λ ν•΄κ²°.

IAM μκ²© μ¦λ… λ° μΈμ¦: aws configureλ¥Ό ν†µν•΄ μ‹¤μ  IAM μ‚¬μ©μμ Access Keyλ¥Ό λ“±λ΅ν•κ³  STS μΈμ¦ μ—λ¬ ν•΄κ²°.

AMI λ° λ¦¬μ „ μΆ…μ†μ„± ν•΄κ²°: λ¦¬μ „λ§λ‹¤ λ‹¤λ¥Έ AMI IDμ νΉμ„±μ„ νμ•…ν•μ—¬ μ„μΈ λ¦¬μ „μ© Ubuntu 24.04 LTS μ΄λ―Έμ§€λ΅ κµμ²΄.

λ³΄μ• λ° μ ‘μ† μ„¤μ •: AWS μ½μ†”μ— μ‹¤μ  ν‚¤ νμ–΄(lee_key)λ¥Ό λ“±λ΅ν•κ³ , EC2μ— νΌλΈ”λ¦­ IPλ¥Ό ν• λ‹Ή(associate_public_ip_address)ν•μ—¬ μ™Έλ¶€ μ ‘μ† κ²½λ΅ ν™•λ³΄.

μΈν”„λΌ μ™„κ³µ λ° μμ› νμ: μ΄ 14κ°μ λ¦¬μ†μ¤(VPC, Subnet, EC2, RDS λ“±)λ¥Ό μ„±κ³µμ μΌλ΅ λ°°ν¬ν• ν›„, λΉ„μ© λ°©μ§€λ¥Ό μ„ν•΄ terraform destroyλ΅ κΉ”λ”ν•κ² μ •λ¦¬.

π’΅ μµλ“ν• μ£Όμ” μ΄λ΅  (Learned Theories)
Terraform State Locking: μ—¬λ¬ μ‘μ—…μκ°€ λ™μ‹μ— μƒνƒλ¥Ό λ³€κ²½ν•μ§€ λ»ν•λ„λ΅ λ³΄νΈν•λ” λ©”μ»¤λ‹μ¦. λΉ„μ •μƒ μΆ…λ£ μ‹ λ°μƒν•λ” λ½ νμΌμ„ μλ™μΌλ΅ κ΄€λ¦¬ν•λ” λ²• μµλ“.

AMI Region Specificity: λ™μΌν• OSλΌλ„ λ¦¬μ „λ§λ‹¤ AMI IDκ°€ λ‹¤λ¥΄λ‹¤λ” μ κ³Ό λ¦¬μ „ κ°„ μΈν”„λΌ λ³µμ  μ‹ κ³ λ ¤ν•΄μ•Ό ν•  ν•µμ‹¬ μ”μ† μ΄ν•΄.

Public vs Private Networking: IGWλ¥Ό ν†µν• μ™Έλ¶€ ν†µμ‹ (Public IP/DNS)κ³Ό VPC λ‚΄λ¶€λ§μ„ ν†µν• μ•μ „ν• λ°μ΄ν„°λ² μ΄μ¤ ν†µμ‹ (Private IP/DNS)μ μ°¨μ΄μ  λ° λ³΄μ•μ  μ΄μ .

Immutable Infrastructure: κΈ°μ΅΄ λ¦¬μ†μ¤μ μ†μ„± λ³€κ²½ μ‹(μ: νΌλΈ”λ¦­ IP μ¶”κ°€) ν…λΌνΌμ΄ μ΄λ¥Ό μ‚­μ  ν›„ μ¬μƒμ„±ν•λ” 'λ¶λ³€ μΈν”„λΌ'μ λ™μ‘ μ›λ¦¬ μ²΄λ“.
